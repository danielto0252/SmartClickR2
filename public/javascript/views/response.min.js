// Fixed issue #11 so that you are no longer 
// stuck on the page of a blank question. - DF 7/29/13

$("#response-form").ready(function()
{
	$(this).submit(function()
	{
		if(false==validateResponse($(this)))
		{
			return false;
		}
	});
});

validateResponse=function(e)
{
	isValid=true;
	var t=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/;
	emptyError='<div class="alert alert-error fade in">';
	emptyError+="<strong>No answer?</strong> Thatâ€™s just silly.";
	emptyError+="</div>";
	numError='<div class="alert alert-error fade in">';
	numError+="<strong>Whoops,</strong> Your answer must be a number";
	numError+="</div>";


	if($("#response-form").find("#mc-container").length==1)
	{
		var n=$('input[name="response"]:checked').val();
		console.log(n);


		if(n === undefined)
		{
			e.find(".alert").hide();
			$("#response-form").before(emptyError);
			isValid=false;
		}
	}

	else if($("#response-form").find("#tf-container").length==1)
	{
		var r=$('input[name="response"]:checked').val();
		console.log(r);

		if(!r)
		{
			e.find(".alert").hide();
			$("#response-form").before(emptyError);
			isValid=false;
		}
	}

	if($("#response-form").find("#free-container").length==1)
	{
		var i=$(".f_response").val().trim();
		console.log(i);

		if(i=="")
		{
			e.find(".alert").hide();
			$("#response-form").before(emptyError);
			isValid=false;
		}
	}

	if($("#response-form").find("#num-container").length==1)
	{
		var s=$(".n_response").val().trim();
		console.log(s);
		console.log(t.test(s));
		if(s=="")
		{
			e.find(".alert").hide();
			$("#response-form").before(emptyError);
			isValid=false;
		}

		else if(t.test(s)==false)
		{
			e.find("div.alert").hide();
			$("#response-form").before(numError);
			isValid=false;
		}
	}

return isValid

}